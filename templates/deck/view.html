{% extends '_base.html' %}

{% load i18n static %}

{% block meta_tags %}

{% endblock %}

{% block title %}
    {% trans 'Cartões - ' %} {{ deck.name }}
{% endblock %}

{% block content %}
    <div class="p-10 min-h-full">
        <h1 class="text-3xl font-bold">{{ deck.name }}</h1>
        <div class="grid grid-cols-4 min-h-max">
            <div class="pt-12 pl-5">
                <ul class="text-lg font-semibold text-gray-700 space-y-4">
                    <li class="cursor-pointer hover:bg-gray-300 p-2 px-4 max-w-max">
                        <i class="bi bi-card-text pr-4"></i>{% trans 'Cartões' %}
                    </li>
                    <li class="cursor-pointer hover:bg-gray-300 p-2 px-4 max-w-max">
                        <i class="bi bi-question-octagon-fill pr-4"></i>{% trans 'Questões' %}
                    </li>
                    <li class="cursor-pointer hover:bg-gray-300 p-2 px-4 max-w-max">
                        <i class="bi bi-pencil-fill pr-4"></i>{% trans 'Escrever' %}
                    </li>
                    <li class="cursor-pointer hover:bg-gray-300 p-2 px-4 max-w-max">
                        <i class="bi bi-info-circle-fill pr-4"></i>{% trans 'Informações' %}
                    </li>
                    <li class="cursor-pointer hover:bg-gray-300 p-2 px-4 max-w-max"
                        data-modal-toggle="create-flashcard">
                      <i class="bi bi-plus-lg pr-4"></i>{% trans 'Adicionar' %}
                    </li>
                </ul>
            </div>
            <div class="col-span-3">
                <div class="relative flex flex-col card-shadow rounded-xl" style="max-width: 80%; min-height: 60vh;">
                    <div class="absolute right-0 text-gray-700 p-5 text-xl cursor-pointer"
                         data-modal-toggle="delete-flashcard">
                        <i class="bi bi-trash3-fill pr-2"></i>
                        {% trans 'Apagar' %}
                    </div>
                    <div id="flashcard" class="flex flex-col grow">
                        {% include 'includes/card/flashcard/front.html' %}
                    </div>
                </div>
                <input id="current-card" type="hidden" value="1">
                <input id="current-side" type="hidden" value="front">
            </div>
        </div>
    </div>
    {% include 'includes/modal/delete_flashcard.html' %}
    {% include 'includes/modal/create_card.html' %}
{% endblock %}

{% block javascript %}
    <script>
        function updateCard() {
            let current_card = document.querySelector('#current-card').value

            htmx.ajax('GET', `/card/view/${current_card}/{{ deck.id }}`, '#flashcard')
        }

        function turnCard() {
            let current_card = document.querySelector('#current-card').value
            let current_side = document.querySelector('#current-side').value

            htmx.ajax('GET', `/card/turn/${current_card}/{{ deck.id }}?side=${current_side}`, '#flashcard')
        }

        function deleteCard() {
            let current_card = document.querySelector('#current-card').value

            htmx.ajax('GET', `/card/remove/${current_card}/{{ deck.id }}`, '#flashcard')

            if (current_card > 1)
                document.querySelector('#current-card').value = current_card - 1
        }
    </script>
{% endblock %}